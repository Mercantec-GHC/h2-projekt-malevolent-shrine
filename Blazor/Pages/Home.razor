@page "/"
@using System.Net.Http

<h1 class="mb-4">Status Dashboard</h1>

<div class="row">
    <div class="col-md-6 mb-4">
        <StatusCard 
            Title="API Status"
            IconClass="bi bi-heart-pulse text-success"
            BorderClass="border-success"
            HealthCheck="@healthCheck" />
    </div>
    <div class="col-md-6 mb-4">
        <StatusCard 
            Title="Database Status"
            IconClass="bi bi-database text-warning"
            BorderClass="border-warning"
            HealthCheck="@dbHealthCheck" />
    </div>
</div>

<div class="hotels">
    @foreach(var h in hotels)
    {
        <div class="hotel-card">
            <p>@h.Name</p><br/>
            @*<img src="h.Image">*@
            <p><strong>Address: </strong>@h.Address</p>
            <p>Rooms: @h.Rooms.Count()</p>
        </div>

    }
</div>

@code {
    HealthCheckResponse? healthCheck;
    HealthCheckResponse? dbHealthCheck;
    List<Hotel> hotels = new List<Hotel>();


    protected override async Task OnInitializedAsync()
    {
        healthCheck = await ApiService.GetHealthCheckAsync();
        dbHealthCheck = await ApiService.GetDBHealthCheckAsync();
        hotels = await ApiService.GetAllHotels();
    }
}
