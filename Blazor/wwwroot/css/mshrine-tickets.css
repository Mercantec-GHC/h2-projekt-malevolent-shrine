@import url('https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&display=swap');

/* =====================
   Базовые переменные
====================== */
:root {
  --bg: #0b0b0d;
  --bg-soft: #131318;
  --text: #e8e8ee;
  --muted: #babac6;
  --crimson: #c92a2a;
  --crimson-soft: #6b0f14;
  --card: #16161c;
  --ok: #1f8a5b;
  --bad: #8a1f1f;
  --cols: 28;
}

/* =====================
   Глобальные стили
====================== */
html, body {
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif;
}

/* =====================
   Типографика и заголовки
====================== */
.site-title, .page-title {
  margin: 16px 8px 4px;
  letter-spacing: 2px;
  text-transform: uppercase;
  font-weight: bold;
}
.page-sub { margin: 0 8px 16px; color: var(--muted); }
.site-title{
  font-family:'UnifrakturMaguntia',system-ui,Segoe UI,Roboto,Arial,sans-serif;
  font-size:44px;letter-spacing:4px;text-transform:uppercase;
  text-shadow:0 0 6px rgba(201,42,42,.9),0 0 28px rgba(201,42,42,.45),0 0 60px rgba(201,42,42,.25);
  margin:10px 0 6px
}
.jp{font-size:18px;color:#f2d9d9;opacity:.85;letter-spacing:2px;text-shadow:0 0 6px rgba(201,42,42,.35)}
.site-title.jp{
  font-family:system-ui, Segoe UI, Roboto, Arial, sans-serif !important;
  font-weight:800; font-size:44px; letter-spacing:4px; opacity:1; color:inherit;
  text-shadow:0 0 6px rgba(201,42,42,.9),0 0 28px rgba(201,42,42,.45),0 0 60px rgba(201,42,42,.25)
}
.navbar-brand.jp{font-family:system-ui, Segoe UI, Roboto, Arial, sans-serif !important}
.site-sub{margin:10px 0 4px;color:#e9dede;text-shadow:0 0 8px rgba(201,42,42,.25)}
.loading, .empty, .msg { margin: 16px 8px; color: var(--muted); }

/* =====================
   Контейнеры и layout
====================== */
.test-root{max-width:1280px;margin:0 auto;padding:8px 8px 24px}
.container{max-width:1180px;margin:0 auto}
.hero{display:flex;flex-direction:column;align-items:center;text-align:center;margin-top:6px;margin-bottom:8px}

/* =====================
   Actions (кнопки в блоке)
====================== */
.actions{display:flex;gap:14px;justify-content:center;margin:14px 0 8px;flex-wrap:wrap}
.actions .btn{flex:1 1 220px;max-width:100%;white-space:normal;overflow-wrap:anywhere;word-break:break-word}
@media (max-width: 520px){.actions .btn{flex-basis:100%}}

/* =====================
   Кнопки
====================== */
.btn{padding:10px 18px;border-radius:12px;border:1px solid #3a3a46;text-decoration:none;color:#fff;display:inline-flex;gap:8px;align-items:center;justify-content:center;min-width:130px;transition:transform .12s ease-out, box-shadow .12s ease-out, filter .12s ease-out}
.btn-red{background:linear-gradient(180deg,#7b1313,#4a0d0d);box-shadow:0 8px 24px rgba(201,42,42,.25), inset 0 0 22px rgba(201,42,42,.35)}
.btn-red:hover{filter:brightness(1.08)}
.btn-ghost{background:rgba(0,0,0,.25)}
.btn-ghost:hover{background:rgba(0,0,0,.35)}
.btn:hover{box-shadow:0 6px 16px rgba(0,0,0,.2)}
.btn:active{transform:scale(.98)}
.btn:focus-visible{outline:none; box-shadow:0 0 0 2px rgba(255,255,255,.15), 0 0 0 4px rgba(201,42,42,.35)}

/* =====================
   Сетки дверей и карточки
====================== */
.door-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 16px;
  padding: 8px 8px 24px;
}
.container .door-grid{display:grid;grid-template-columns:repeat(3, minmax(260px,1fr));gap:24px;padding:12px;justify-items:center}
@media (max-width:980px){.container .door-grid{grid-template-columns:repeat(2,minmax(260px,1fr))}}
@media (max-width:640px){.container .door-grid{grid-template-columns:repeat(1,minmax(260px,1fr))}}
.door-card {
  background: linear-gradient(180deg, var(--card), #0e0e13);
  border: 1px solid #23232b;
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  position: relative;
  transition: transform .12s ease, box-shadow .12s ease;
  width:100%;
}
.door-card:hover { transform: translateY(-3px); box-shadow: 0 10px 24px rgba(201,42,42,.15); }
.door-rune { width: 64px; height: 64px; filter: drop-shadow(0 0 6px rgba(201,42,42,.6)); }
.door-label { margin-top: 12px; }
.door-name { font-weight: 700; }
.door-addr { color: var(--muted); font-size: 14px; }
/* --- Wooden door look --- */
.door-scene{position:relative;width:100%;aspect-ratio:2/3;border-radius:14px;background:radial-gradient(120% 100% at 50% -10%, #2a0f12 0%, #0b0b0d 60%);box-shadow:0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.05);overflow:hidden}
.door-frame{position:absolute;inset:10px;border-radius:10px;border:2px solid rgba(255,255,255,.08);box-shadow:inset 0 0 0 1px rgba(255,255,255,.05)}
.door-leaf{position:absolute;inset:10px;border-radius:8px;transform-origin:left center;transform:perspective(1000px) rotateY(0deg);transition:transform .55s cubic-bezier(.2,.7,.1,1), box-shadow .55s;box-shadow:inset 0 0 30px rgba(0,0,0,.4), inset 0 0 0 1px rgba(255,255,255,.06);
  background:repeating-linear-gradient(90deg, rgba(30,9,9,.22) 0 4px, rgba(0,0,0,.24) 4px 8px), linear-gradient(180deg, #5a2a2a 0%, #3e1818 38%, #2a1010 80%);
}
.door-leaf::before{content:"";position:absolute;left:18px;right:18px;top:28%;height:10px;background:linear-gradient(180deg,#3f1717,#250b0b);box-shadow:0 0 10px rgba(0,0,0,.35);border-radius:6px}
.door-leaf::after{content:"";position:absolute;left:18px;right:18px;top:58%;height:10px;background:linear-gradient(180deg,#3f1717,#250b0b);box-shadow:0 0 10px rgba(0,0,0,.35);border-radius:6px}
.stile{position:absolute;top:10px;bottom:10px;left:calc(50% - 7px);width:14px;background:linear-gradient(180deg,#4a1c1c,#2b0f0f);border-radius:6px;box-shadow:inset 0 0 6px rgba(255,255,255,.05)}
.handle{position:absolute;top:50%;left:calc(50% + 36px);width:12px;height:12px;border-radius:50%;background:#b88a5a;box-shadow:0 0 0 2px rgba(0,0,0,.5), inset 0 0 8px rgba(0,0,0,.5)}
.rune-wrap{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
.rune-img{width:96px;height:96px;filter:drop-shadow(0 0 10px rgba(201,42,42,.65)) drop-shadow(0 0 24px rgba(201,42,42,.35))}
.plaque{position:absolute;left:14px;right:14px;bottom:14px;background:rgba(0,0,0,.38);backdrop-filter:blur(3px);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:10px 12px}
.hotel-name{font-weight:800;letter-spacing:1px;text-align:left}
.hotel-addr{color:#babac6;font-size:13px;margin-top:2px;text-align:left}
.door-card.open .door-leaf{transform:perspective(1000px) rotateY(-80deg);box-shadow:inset 0 0 30px rgba(0,0,0,.4), 10px 6px 34px rgba(0,0,0,.55)}
.door-card:hover .door-leaf{box-shadow:inset 0 0 50px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06)}
.door-button{position:absolute;inset:0;border:none;background:transparent;cursor:pointer;border-radius:14px}

/* =====================
   Hotel head
====================== */
.hotel-head { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; width: 100%; padding: 8px; gap: 0; }
.hotel-rune { width: 48px; height: 48px; margin-bottom: 8px; }
.hotel-head .hotel-name { font-size: 22px; font-weight: 700; width: 100%; text-align: center; }
.hotel-head .hotel-addr { color: var(--muted); width: 100%; text-align: center; }

/* =====================
   Rooms
====================== */
.room-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 320px)); justify-content: center; gap: 16px; padding: 8px; }
.room-card { border: 1px solid #242430; border-radius: 12px; background: var(--card); padding: 12px; display: flex; flex-direction: column; align-items: center; text-align: center; width: 100%; }
.room-card.free { box-shadow: inset 0 0 0 1px rgba(31,138,91,.3); }
.room-card.busy { box-shadow: inset 0 0 0 1px rgba(138,31,31,.3); }
.room-row { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; }

/* =====================
   Кнопки бронирования
====================== */
.btn-book {
  margin-top: 10px;
  background: var(--crimson);
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 10px;
  cursor: pointer;
}
.btn-book:disabled { opacity: .5; cursor: not-allowed; }
.book-card .btn-ghost { margin-left: 8px; padding: 10px 14px; border-radius: 10px; background: transparent; border: 1px solid #303040; color: var(--text); cursor: pointer; }

/* =====================
   Бронирование
====================== */
.book-card { background: var(--card); border: 1px solid #242430; border-radius: 12px; padding: 16px; margin: 8px; max-width: 520px; }
.room-line { margin: 6px 0; }
.date-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 12px 0; }
.date-grid input[type=date] { width: 100%; padding: 10px; border-radius: 8px; background: #0f0f14; color: var(--text); border: 1px solid #2a2a36; }
.price-line { display: flex; align-items: center; gap: 8px; }
.spacer { flex: 1; }

/* =====================
   Профиль
====================== */
.profile-card { background: var(--card); border: 1px solid #242430; border-radius: 12px; padding: 16px; margin: 8px auto; max-width: 640px; }
.profile-row { margin: 6px 0; }
.block-title { margin: 16px 8px 6px; text-align: center; }
.bookings-list { display: grid; gap: 12px; padding: 8px; max-width: 640px; margin: 0 auto; }
.booking-item { background: #111119; border: 1px solid #232332; border-radius: 10px; padding: 12px; }

/* =====================
   Toasts для админки
====================== */
.ms-toasts{ position:fixed; right:16px; top:16px; display:flex; flex-direction:column; gap:10px; z-index:1050; }
.ms-toast{ min-width:240px; max-width:360px; padding:12px 14px; border-radius:8px; color:#fff; box-shadow:0 6px 18px rgba(0,0,0,.25); background:#343a40; border:1px solid rgba(255,255,255,.08); animation:ms-fadein .2s ease-out; }
.ms-toast .ms-toast-title{ font-weight:700; margin-bottom:4px; }
.ms-toast.info{ background:#212529; border-color:#495057; }
.ms-toast.success{ background:#2b8a3e; }
.ms-toast.warning{ background:#e67700; }
.ms-toast.error{ background:#c92a2a; }
@keyframes ms-fadein{ from{ opacity:0; transform: translateY(-6px);} to{ opacity:1; transform:none;} }

/* =====================
   Календарь доступности номеров
====================== */
.calendar-wrap{overflow:auto; padding: 8px;}
.calendar-grid{display:grid; grid-template-columns: 200px repeat(var(--cols, 28), 1fr); gap:4px; align-items:stretch;}
.cal-cell{background:#0f0f14; border:1px solid #242430; border-radius:6px; min-height:36px; display:flex; align-items:center; justify-content:center; font-size:12px; color:var(--text)}
.cal-cell.head{background:#15151d; font-weight:700;}
.cal-cell.free{background:rgba(31,138,91,.18); border-color:rgba(31,138,91,.35)}
.cal-cell.occupied{background:rgba(201,42,42,.22); border-color:rgba(201,42,42,.45)}
.cal-cell.free:hover{box-shadow:0 0 0 2px rgba(31,138,91,.25) inset}
.cal-cell.occupied:hover{box-shadow:0 0 0 2px rgba(201,42,42,.25) inset}
.room-col{display:flex; flex-direction:column; align-items:flex-start; justify-content:center; gap:2px; padding:8px}
.room-id{font-weight:700}
.room-hotel{color:var(--muted); font-size:12px}
.date-top{font-weight:700}
.date-sub{color:var(--muted); font-size:11px}
.legend{display:flex; gap:16px; align-items:center; margin: 8px 0 12px}
.legend-item{display:inline-flex; gap:8px; align-items:center; color:var(--muted)}
.legend-dot{width:12px;height:12px;border-radius:50%;display:inline-block;border:1px solid #333}
.legend-dot.free{background:rgba(31,138,91,.6); border-color: rgba(31,138,91,.8)}
.legend-dot.occupied{background:rgba(201,42,42,.65); border-color: rgba(201,42,42,.85)}
.skeleton{display:flex; flex-direction:column; gap:10px; padding:4px 0}
.skeleton-line{width:100%; background:linear-gradient(90deg, rgba(255,255,255,0.06) 25%, rgba(255,255,255,0.12) 37%, rgba(255,255,255,0.06) 63%); background-size:400% 100%; animation:ms-shimmer 1.25s ease-in-out infinite; border:1px solid rgba(255,255,255,.06)}
@keyframes ms-shimmer{0%{background-position:100% 0}100%{background-position:-100% 0}}

/* =====================
   Медиа-запросы
====================== */
@media (max-width: 980px){
  .calendar-grid{grid-template-columns: 160px repeat(var(--cols, 28), 1fr)}
}
@media (max-width: 640px){
  .calendar-grid{grid-template-columns: 140px repeat(var(--cols, 28), 1fr)}
}
